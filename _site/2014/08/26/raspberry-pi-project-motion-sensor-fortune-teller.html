<!DOCTYPE html>
<html lang="en">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<title>Raspberry Pi Project : Motion Sensor Fortune Teller</title>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Raspberry Pi Project : Motion Sensor Fortune Teller | Richard Julian</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="Raspberry Pi Project : Motion Sensor Fortune Teller" />
<meta name="author" content="Richard Julian" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/2014/08/26/raspberry-pi-project-motion-sensor-fortune-teller.html" />
<meta property="og:url" content="http://localhost:4000/2014/08/26/raspberry-pi-project-motion-sensor-fortune-teller.html" />
<meta property="og:site_name" content="Richard Julian" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-08-26T00:00:00-07:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2014/08/26/raspberry-pi-project-motion-sensor-fortune-teller.html"},"author":{"@type":"Person","name":"Richard Julian"},"datePublished":"2014-08-26T00:00:00-07:00","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@type":"BlogPosting","url":"http://localhost:4000/2014/08/26/raspberry-pi-project-motion-sensor-fortune-teller.html","headline":"Raspberry Pi Project : Motion Sensor Fortune Teller","dateModified":"2014-08-26T00:00:00-07:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
</head>

<body>
  <main class="container">
    <section class="about">
      <a href="/"><img src="/assets/portfolio.png" alt="Richard Julian"></a>
      <h2 id="title">
        <a href="/">Richard Julian</a>
      </h2>
      <p class="tagline">Security.
Cloud.
Sometimes transit.
</p>
      <ul class="social"><a href="https://github.com/rjulian">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a></ul><p>&copy;
        2020</p></section>
    <section class="content">
      <div class="post-container">
  <a class="post-link" href="/2014/08/26/raspberry-pi-project-motion-sensor-fortune-teller.html">
    <h2 class="post-title">Raspberry Pi Project : Motion Sensor Fortune Teller</h2>
  </a>
  <div class="post-meta">
    <div class="post-date"><i class="icon-calendar"></i>Aug 26, 2014</div></div>
  <div class="post">
    <p><img src="/images/raspberry_pi_talker.jpg" alt="Model" /></p>

<p>Want a unique, possibly creepy little feature for your next dinner party? Install a Raspberry Pi powered fortune teller robot (complete with mannequin head!) in your bathroom! It’s a simple project that involves sensors, text to speech programs, and a fair bit of fun. There’s nothing like having your guests come out wondering why the mannequin head in the bathroom just told them “Don’t go surfing in South Dakota for a while.”</p>

<p><strong>PARTS</strong></p>

<p>Required are the following parts:</p>

<ul>
  <li>Raspberry Pi</li>
  <li>Solderless Breadboard</li>
  <li>Wires (six needed, all Male to Female)</li>
  <li>Passive Infrared (PIR) Sensor Module (Buy from <a href="https://www.adafruit.com/products/189">Adafruit</a> or quite cheaper, from <a href="http://www.ebay.com/sch/i.html?_from=R40&amp;_sacat=0&amp;_nkw=PIR+sensor+module">ebay</a>)</li>
  <li>Speakers</li>
</ul>

<p>Optional parts include:</p>

<ul>
  <li>A USB hub (to power multiple things, e.g. speakers)</li>
  <li>Wireless dongle (for remote control, so you can scare your guests further by having it say their names)</li>
  <li>A creepy mannequin head</li>
</ul>

<p><strong>THE PROCESS</strong></p>

<p><strong>1. Set up the Pi</strong></p>

<p>Install Raspbian : numerous tutorials exist for how to do this, Raspberry Pi has documentation <a href="http://www.raspberrypi.org/help/noobs-setup/">here</a>. Personally, I just have the latest Raspbian img and use the dd command to load it onto the SD card.</p>

<p><strong>2. Set up the PIR sensor</strong></p>

<p>For the actual electronics part of this hack, there also exists quite a few tutorials out there. The best explanation for the hardware process was from a <a href="http://dataissexy.wordpress.com/2013/06/29/raspberry-pi-pir-motion-detection-and-alerting-to-sms-raspberrypi-sms-sensors/">blog post on DataIsSexy</a>. Follow this exactly and you’re in business.</p>

<p><strong>3. Set up the software</strong></p>

<p>And now the fun part of putting it all together. To do this, you can find an awesome write up on using python and the GPIO library for the PIR <a href="http://www.raspberrypi-spy.co.uk/2013/01/cheap-pir-sensors-and-the-raspberry-pi-part-1/">at Raspberry Pi Spy. </a>  This should be everything you need to get going with using a PIR to trigger an event.</p>

<p>To get the fortune telling part, you’ll need to install <strong>fortune</strong> and <strong>festival</strong> by typing the command <strong>sudo apt-get install fortune festival </strong>.</p>

<p>Festival’s text to speech default install is, how can we say, rough. I’d recommend speeding it down and selecting one of the more natural voice packages.</p>

<p>Fortune can also be hacked to your liking. There’re a number of data files that you can install with fortune giving you seemingly endless quotes to be spoken. I personally enjoyed having it be 50% literary quotes 50% fortunes (the nasty fortunes collection sounds even more fun). The command to do this is <strong>fortune 50% literature 50% fortunes</strong> .</p>

<p>Now, we just plug this system call into our python script for simplicity (something tells me python has a library to do this as well).</p>

<p>The full code, condensed without comments is:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import RPi.GPIO as GPIO
import time
import os
import datetime
GPIO.setmode(GPIO.BCM)
GPIO_PIR = 7
GPIO.setup(GPIO_PIR,GPIO.IN)
Current_State = 0
Previous_State = 0
try:
    print "Waiting for PIR to settle ..."
    while GPIO.input(GPIO_PIR)==1:
        Current_State = 0
    print " Ready "
    while True :
        Current_State = GPIO.input(GPIO_PIR)
        if Current_State==1 and Previous_State==0:
            print " Motion detected!"
            print datetime.datetime.now()
            os.system("/usr/games/fortune 50% literature 50% fortunes | tee -a fortunes | /usr/bin/festival --tts")
            time.sleep(90)
            Previous_State=1
        elif Current_State==0 and Previous_State==1:
            print " Ready"
            Previous_State=0
        time.sleep(0.01)
except KeyboardInterrupt:
    print " Quit"
    GPIO.cleanup()
</code></pre></div></div>

<p>Should be pretty apparent what the command does. The only thing I haven’t mentioned is the <strong>tee -a fortunes</strong> command. It creates a file (named fortunes) with the text info appended every time the command is called, it’s a way of logging quotes said (in case someone didn’t understand it).</p>

<p><strong>SET IT UP</strong></p>

<table>
  <tbody>
    <tr>
      <td>Now just plug it in and set it  and forget it! It’s a fun and easy project. And you could create a simple way of having it say custom commands over an ssh connection (requires wireless dongle and ssh server running) and the command **echo “Hello There!”</td>
      <td>fortune –tts**</td>
    </tr>
  </tbody>
</table>


  </div></div>

    </section>
  </main>
</body>

</html>
